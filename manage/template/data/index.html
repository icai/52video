<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
        <!-- bootstrap 3.0.2 -->
        <link href="__PUBLICURL__/home/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <!-- font Awesome -->
        <link href="__PUBLICURL__/home/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <!-- Ionicons -->
        <link href="__PUBLICURL__/home/css/ionicons.min.css" rel="stylesheet" type="text/css" />
        <!-- Daterange picker -->
        <link href="__PUBLICURL__/home/css/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" />
        <!-- Theme style -->
        <link href="__PUBLICURL__/home/css/style.css" rel="stylesheet" type="text/css" />
        <link href="__PUBLICURL__/home/css/data.css" rel="stylesheet" type="text/css" />
        
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
      
    </head>
   <body style="background:#fff">
<div class="allmain dataindex">
<h4 class="htitle">数据详情</h4>


<div class="commentnav borderk">
  <a href="#basisdata" class="active">基础数据</a>
    <!--if:{$dataform}-->
  <a href="#surveydata2">调查数据</a>
  <!--{/if}-->
</div>
<div class="commentmain">
<div class="container active" id="basisdata" style="width:1080px; padding:0;">
       		<div>
       			<div class="data-statistic clearfix">
                	<p class="datatitle" style="margin-bottom:70px;">访问量次数</p>
                
                
		        	  <div class="data-statistic-currentcount" style="margin-left:100px;margin-right: 50px;">
					        <div class="data-statistic-title">总访问量</div>
					        <div id="now1Online" class="data-statistic-count">{$data.allcount}</div>
					        <i class="icon"></i>
				      </div>
				      <div class="data-statistic-daikuan" style="margin-right: 50px; margin-left:0">
					        <div class="data-statistic-title">点播</div>
					        <div id="now5Bw" class="data-statistic-count">{$data.coursecount}</div>
					        <i class="icon"></i>
				      </div>
				      <div class="data-statistic-totalcount"  style="margin-left:0;">
					        <div class="data-statistic-title">直播</div>
					        <div id="datOnline" class="data-statistic-count">{$data.livecount}</div>
					        <i class="icon"></i>
				      </div>
				    <!--  <div class="data-statistic-todydaikuan">
					        <div class="data-statistic-title">累计流量</div>
					        <div id="dayTr" class="data-statistic-count">0<span class="postfix ml-15">MB</span></div>
					        <i class="icon"></i>
				      </div>-->
			    </div>
                <div class="data-statistic clearfix" style="margin-top:20px; padding-bottom:20px;">
                <p class="datatitle">流量统计图</p>
		        	  <div id="flowall" style="margin:0; margin-left:190px; padding:40px 0; width:inherit; background:#fff;">
					       <div class="rad-cntnt"><p>总流量</p><p style="color:#0EE196">{$data.allflow}M</p></div>
				      </div>
				      <div id="flowlive" style="margin:0; margin-left:100px; padding:40px 0; width:inherit;background:#fff;">
					       <div class="rad-cntnt"><p>直播流量</p><p style="color:#F7E542">{$data.liveflow}M</p>  </div>
				      </div>
				      <div id="flowfield" style="margin:0; margin-left:100px; padding:40px 0; width:inherit;background:#fff;">
					      <div class="rad-cntnt"><p>点播流量</p><p style="color:#EC5255">{$data.courseflow}M</p>  </div>
				      </div>
				 
			    </div>
                <div style="margin:20px 0">
                <div style="display:inline-block;border:1px solid #d4d4d4; height:362px;">
                <p class="datatitle">流量曲线图</p>
                
                <div class="chart" id="videoflow" style="width: 645px; height: 315px; display:inline-block;">
                </div>
                </div>
                
                <div style="display:inline-block; float:right;border:1px solid #d4d4d4;">
                <p class="datatitle">访客来源统计</p>
                <div class="chart pull-left" id="mobile-chart" style="height: 315px;width:395px; float:right !important;"> 
                    
                   </div>
                 </div>
                 
                </div>
                
			      <?php if($livenum){ ?>
                <div class="chart" id="livenum" style="width: 675px; height: 300px;margin-left: 19px;"></div>
                 <?php } ?>
                  
			  
              
              <div style="display:inline-block;border:1px solid #d4d4d4;">
               <p class="datatitle">访客观看时间分区段统计</p>
			    <div class="chart" id="line-chart" style="width: 645px; height: 315px;"></div>
              
              </div>
               <div class="panel-body ledata-home-userface clearfix" style="display:inline-block;border:1px solid #d4d4d4; float:right;">
                <p class="datatitle">用户性别图</p>
			        <div class="box pull-left" style="height: 315px;width:395px; margin:0; border:0;">
                    
			        	<div class="con sex clearfix pull-left" style="height:100%; width:100%;border:0; padding-top:65px;">
                				<div style="margin-bottom: 30px; text-align:center;padding: 0 40px;" >
                                    <p id="man_title" data-placement="bottom" data-toggle="tooltip"  class="pull-left" data-original-title="" title="">
                                            <i class="icon-data-user-man-wj" > </i>
                                            <i id="man_pic"></i>
                                     </p>
                                    <div class="progress">
                                            <div class="progress-bar wid1" style="width:{$data.man}%"></div>
                                    </div>
                                    <span> {$data.man}% </span>
                                </div>
                                <div style="margin-bottom: 30px; text-align:center; padding: 0 40px;" >
                                      <p id="woman_title" data-placement="bottom" data-toggle="tooltip" class="pull-left" data-original-title="" title="">
                                            <i class="icon-data-user-woman-wj"></i>
                                            <i id="woman_pic"></i>
                                     </p>
                                    <div class="progress">
                                            <div class="progress-bar wid2" style="width:{$data.woman}%"></div>
                                    </div>
                                     <span> {$data.woman}% </span>
                                </div>
                                <div  style="text-align:center; padding: 0 40px;">
                                   <p id="human_title" data-placement="bottom" data-toggle="tooltip"  class="pull-left" data-original-title="" title="">
                                            <i class="icon-data-user-human-wj"></i>
                                            <i id="human_pic"></i>
                                    </p>
                                    <div class="progress">
                                            <div class="progress-bar wid3" style="width:{$data.human}%"></div>
                                    </div>
                                    <span> {$data.human}% </span>
                                </div> 
			        		
				        </div>
				      
			        </div>
                     
               		
		        </div>





</div>


                   
              
			   
		        
       			
		        
    		</div>
            <script type=text/javascript src=" __PUBLICURL__/js/highcharts.js"></script>
<script type=text/javascript src=" __PUBLICURL__/js/highcharts-3d.js"></script>
<script type=text/javascript src=" __PUBLICURL__/js/radialIndicator.min.js"></script>
              <!--if:{$dataform}-->
            <div id="surveydata2">
            <!--foreach:{$formlist $key $vo}-->
            	<div class="problemfigures">
                    <div class="figuretitle">{$vo.name}</div>
                    <div id="container{$key}"  class="figure" style=" width:485px; height:330px;">
                        
                    </div>
                    
                    
<script>

    $('#container{$key}').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: '调查情况占比',
			verticalAlign:'bottom',
			style:{
				fontSize:'14px'	
			}
        },
        tooltip: {
            headerFormat: '{series.name}<br>',
            pointFormat: '{point.name}: <b>{point.y}</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: '调查情况占比',
            data: [
              <!--foreach:{$dataform[$vo['field']] $k $v}-->
			 
                ['<?php  echo model('expand_model')->get_list_model($vo['type'],$k,$vo['options']); ?>',   {$v}],
				
				 	<!--{/foreach}-->
            ]
        }]
    });



</script>
                 </div>
                <!--{/foreach}-->
              
            </div>	
              <!--{/if}-->

    	</div>

 </div>






<script type="text/javascript">
var id='{$id}';
 
	$.post('__URL__/flowdata',{id:id},function(data){
		$('#videoflow').highcharts({
        chart: {
            type: 'areaspline'
        },
        title: {
            text: ''
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            verticalAlign: 'top',
            x: 150,
            y: 100,
            floating: true,
            borderWidth: 1,
            backgroundColor: '#FFFFFF'
        },
        xAxis: {
            categories: 
               data.message.videoflow.date
            
        },
        yAxis: {
            title: {
                text: '流量/M'
            }
        },
        tooltip: {
            shared: false,
            valueSuffix: 'M'
        },
        credits: {
            enabled: false
        },
        plotOptions: {
            areaspline: {
                fillOpacity: 0.5
            }
        },
        series: [{
            name: '流量/M',
            data: data.message.videoflow.value
        }]
    });
	
	 $('#livenum').highcharts({
        chart: {
            type: 'line'
        },
        title: {
            text: '直播在线人数'
        },
        subtitle: {
            text: '来源: 闪阅云'
        },
        xAxis: {
            categories:data.message.livenum.date
        },
        yAxis: {
            title: {
                text: '人数'
            }
        },
        tooltip: {
            enabled: false,
            formatter: function() {
                return '<b>'+ this.series.name +'</b><br/>'+this.x +': '+ this.y;
            }
        },
        plotOptions: {
            line: {
                dataLabels: {
                    enabled: true
                },
                enableMouseTracking: false
            }
        },
        series: [{
            name: '在线人数',
            data: data.message.livenum.value
        }]
    });
  
	
		},'json')

	$.post('__URL__/sectiondata',{id:id},function(data){
 $('#line-chart').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories:
                data.message.y
           ,
            crosshair: true
        },
        yAxis: {
            min: 0,
            title: {
                text: '人数 '
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} 人</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [{
            name: '总访客',
            data: data.message.allcount
        }, {
            name: '点播访客',
            data: data.message.coursecount
        }, {
            name: '直播访客',
            data: data.message.livecount
        }]
    });
},'json')
$.post('__URL__/sexcity',{id:id},function(data){
	
	 $('#mobile-chart').highcharts({
        chart: {
            type: 'pie',
            options3d: {
                enabled: true,
                alpha: 45
            }
        },
        title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
        plotOptions: {
            pie: {
                innerSize: 20,
                depth: 20
            }
        },
        series: [{
            name: '数量',
            data: data.message.citydata    
        }]
    });
},'json')
$(function () {
	var containerall = $('#flowall'),
    msgHolder = containerall.find('.rad-cntnt'),
    containerProg = containerall.radialIndicator({
        radius: 80,
		 barColor: '#0EE196',
       initValue: 100,
        percentage: true,
        displayNumber: false
    }).data('radialIndicator');
	
		var containerlive = $('#flowlive'),
    msgHolder = containerlive.find('.rad-cntnt'),
    containerProg = containerlive.radialIndicator({
        radius: 80,
		barColor: '#F7E542',
       initValue: '{$data.livepre}',
        percentage: true,
        displayNumber: false
    }).data('radialIndicator');
	
		var containerfield = $('#flowfield'),
    msgHolder = containerfield.find('.rad-cntnt'),
    containerProg = containerfield.radialIndicator({
        radius: 80,
		barColor: '#EC5255',
       initValue: {$data.coursepre},
        percentage: true,
        displayNumber: false
    }).data('radialIndicator');
 

	
   
	 
});
		</script>
        
    </body>
</html>
