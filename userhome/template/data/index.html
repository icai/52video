<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>直播平台</title>
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
        <!-- bootstrap 3.0.2 -->
        <link href="__PUBLICURL__/home/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <!-- font Awesome -->
        <link href="__PUBLICURL__/home/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <!-- Ionicons -->
        <link href="__PUBLICURL__/home/css/ionicons.min.css" rel="stylesheet" type="text/css" />
        <!-- Daterange picker -->
        <link href="__PUBLICURL__/home/css/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" />
        <!-- Theme style -->
        <link href="__PUBLICURL__/home/css/style.css" rel="stylesheet" type="text/css" />
        <link href="__PUBLICURL__/home/css/data.css" rel="stylesheet" type="text/css" />
        
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>
   <body>


<div class="container">
       		<div class="row">
       			<div class="data-statistic clearfix">
		        	  <div class="data-statistic-currentcount">
					        <div class="data-statistic-title">总访问量</div>
					        <div id="now1Online" class="data-statistic-count">{$data.allcount}<span class="postfix ml-15"></span></div>
					        <i class="icon"></i>
				      </div>
				      <div class="data-statistic-daikuan">
					        <div class="data-statistic-title">点播</div>
					        <div id="now5Bw" class="data-statistic-count">{$data.coursecount}<span class="postfix ml-15"></span></div>
					        <i class="icon"></i>
				      </div>
				      <div class="data-statistic-totalcount">
					        <div class="data-statistic-title">直播</div>
					        <div id="datOnline" class="data-statistic-count">{$data.livecount}<span class="postfix ml-15"></span></div>
					        <i class="icon"></i>
				      </div>
				    <!--  <div class="data-statistic-todydaikuan">
					        <div class="data-statistic-title">累计流量</div>
					        <div id="dayTr" class="data-statistic-count">0<span class="postfix ml-15">MB</span></div>
					        <i class="icon"></i>
				      </div>-->
			    </div>
			      <?php if($livenum){ ?>
                <div class="chart" id="livenum" style="width: 675px; height: 300px;margin-left: 19px;"></div>
                 <?php } ?>
                  
			  
			    <div class="chart" id="line-chart" style="width: 675px; height: 300px;margin-left: 19px;"></div>
                 <div class="panel-heading">
			        <h3 class="panel-title stop-time">流量统计</h3>
		        </div>
                <style>
     #flowall,#flowlive,#flowfield{
    position: relative;
    display: inline-block;
	height:auto;

}
 #flowall{
	 margin-left:0px;	 
	 }
 
.rad-cntnt{
    position: absolute !important;
	margin:auto !important;
	height:auto !important;
    display: table;
    vertical-align: middle;
    text-align: center;
    width: 160px !important;
    top:50%;
	
    -webkit-transform: translateY(-50%);
    -moz-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -o-transform: translateY(-50%);
    transform: translateY(-50%);
    font-size:20px;
    line-height: 24px;
}
.rad-cntnt p{ line-height:30px;}
                </style>
			    <div class="data-statistic clearfix">
		        	  <div id="flowall">
					       <div class="rad-cntnt"><p>总流量</p><p style="color:#0EE196">{$data.allflow}M</p></div>
				      </div>
				      <div id="flowlive">
					       <div class="rad-cntnt"><p>直播流量</p><p style="color:#F7E542">{$data.liveflow}M</p>  </div>
				      </div>
				      <div id="flowfield">
					      <div class="rad-cntnt"><p>点播流量</p><p style="color:#EC5255">{$data.courseflow}M</p>  </div>
				      </div>
				 
			    </div>
                   <div class="chart" id="videoflow" style="width: 675px; height: 300px;margin-left: 19px;"></div>
              
			    <div class="panel-heading">
			        <h3 class="panel-title">用户性别</h3>
		        </div>
		        <div class="panel-body ledata-home-userface clearfix">
			        <div class="box pull-left">
			        	<div class="con sex clearfix pull-left" >
                				<div style="margin-bottom: 30px" >
                                    <p id="man_title" data-placement="bottom" data-toggle="tooltip"  class="pull-left" data-original-title="" title="">
                                            <i class="icon-data-user-man-wj" > </i>
                                            <i id="man_pic"></i>
                                     </p>
                                    <div class="progress">
                                            <div class="progress-bar wid1" style="width:{$data.man}%"></div>
                                    </div>
                                    <span> {$data.man}% </span>
                                </div>
                                <div style="margin-bottom: 30px" >
                                      <p id="woman_title" data-placement="bottom" data-toggle="tooltip" class="pull-left" data-original-title="" title="">
                                            <i class="icon-data-user-woman-wj"></i>
                                            <i id="woman_pic"></i>
                                     </p>
                                    <div class="progress">
                                            <div class="progress-bar wid2" style="width:{$data.woman}%"></div>
                                    </div>
                                     <span> {$data.woman}% </span>
                                </div>
                                <div >
                                   <p id="human_title" data-placement="bottom" data-toggle="tooltip"  class="pull-left" data-original-title="" title="">
                                            <i class="icon-data-user-human-wj"></i>
                                            <i id="human_pic"></i>
                                    </p>
                                    <div class="progress">
                                            <div class="progress-bar wid3" style="width:{$data.human}%"></div>
                                    </div>
                                    <span> {$data.human}% </span>
                                </div> 
			        		<!--<div class="pull-left icon">
			        			<i class="icon-data-sex-wj"></i>
			        		</div>
			        		<div class="pull-left info">
				                <h5 class="title">性别</h5>
				                <p class="txt">您的访客属于
				                	<span id="gender" class="text-warning">未知</span>
				                	知音
				                </p>
				           	</div>
				            <div class="pull-left chart icons">
				               
				                <p id="man_title" data-placement="bottom" data-toggle="tooltip" class="pull-left" data-original-title="" title="">
				                    <i class="icon-data-user-man-wj"></i>
				                    <i id="man_pic"></i>
				                </p>
				                <p id="woman_title" data-placement="bottom" data-toggle="tooltip" class="pull-left" data-original-title="" title="">
				                    <i class="icon-data-user-woman-wj"></i>
				                    <i id="woman_pic"></i>
				                </p>
				                <p id="human_title" data-placement="bottom" data-toggle="tooltip" class="pull-left" data-original-title="" title="">
				                    <i class="icon-data-user-human-wj"></i>
				                    <i id="human_pic"></i>
				                </p>
				            </div>-->
				        </div>
				       <!-- <div class="con age clearfix">
				            <div class="pull-left icon">
				               	<i class="icon-data-age-wj"></i>
				            </div>
				            <div class="pull-left info">
						        <h5 class="title">年龄</h5>
						        <p class="txt">您的平台属于
						            <span id="age" class="text-success"></span>
						            知音
						        </p>
						    </div> 
				        </div>        -->
			        </div>
               		<div class="chart pull-left" id="mobile-chart" style="height: 270px;width:355px;"></div>
		        </div>
       			
		        
    		</div>
    	</div>

 <!--<div class="chart" id="line-chart" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
 
 <div class="chart" id="mobile-chart" style="height: 400px;"></div>-->
<script type=text/javascript src=" __PUBLICURL__/js/highcharts.js"></script>
<script type=text/javascript src=" __PUBLICURL__/js/highcharts-3d.js"></script>
<script type=text/javascript src=" __PUBLICURL__/js/radialIndicator.min.js"></script>
<script type="text/javascript">
var id='{$id}';
 
	$.post('__URL__/flowdata',{id:id},function(data){
		$('#videoflow').highcharts({
        chart: {
            type: 'areaspline'
        },
        title: {
            text: '流量曲线图'
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            verticalAlign: 'top',
            x: 150,
            y: 100,
            floating: true,
            borderWidth: 1,
            backgroundColor: '#FFFFFF'
        },
        xAxis: {
            categories: 
               data.message.videoflow.date
            
        },
        yAxis: {
            title: {
                text: '流量/M'
            }
        },
        tooltip: {
            shared: true,
            valueSuffix: 'M'
        },
        credits: {
            enabled: false
        },
        plotOptions: {
            areaspline: {
                fillOpacity: 0.5
            }
        },
        series: [{
            name: '流量/M',
            data: data.message.videoflow.value
        }]
    });
	
	 $('#livenum').highcharts({
        chart: {
            type: 'line'
        },
        title: {
            text: '直播在线人数'
        },
        subtitle: {
            text: '来源: 闪阅云'
        },
        xAxis: {
            categories:data.message.livenum.date
        },
        yAxis: {
            title: {
                text: '人数'
            }
        },
        tooltip: {
            enabled: false,
            formatter: function() {
                return '<b>'+ this.series.name +'</b><br/>'+this.x +': '+ this.y;
            }
        },
        plotOptions: {
            line: {
                dataLabels: {
                    enabled: true
                },
                enableMouseTracking: false
            }
        },
        series: [{
            name: '在线人数',
            data: data.message.livenum.value
        }]
    });
  
	
		},'json')

	$.post('__URL__/sectiondata',{id:id},function(data){
 $('#line-chart').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: '访客观看时间分区段统计'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories:
                data.message.y
           ,
            crosshair: true
        },
        yAxis: {
            min: 0,
            title: {
                text: '人数 '
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} 人</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [{
            name: '总访客',
            data: data.message.allcount
        }, {
            name: '点播访客',
            data: data.message.coursecount
        }, {
            name: '直播访客',
            data: data.message.livecount
        }]
    });
},'json')
$.post('__URL__/sexcity',{id:id},function(data){
	
	 $('#mobile-chart').highcharts({
        chart: {
            type: 'pie',
            options3d: {
                enabled: true,
                alpha: 45
            }
        },
        title: {
            text: '访客来源统计'
        },
        subtitle: {
            text: '来源对比'
        },
        plotOptions: {
            pie: {
                innerSize: 20,
                depth: 20
            }
        },
        series: [{
            name: '数量',
            data: data.message.citydata    
        }]
    });
},'json')
$(function () {
	var containerall = $('#flowall'),
    msgHolder = containerall.find('.rad-cntnt'),
    containerProg = containerall.radialIndicator({
        radius: 80,
		 barColor: '#0EE196',
       initValue: 100,
        percentage: true,
        displayNumber: false
    }).data('radialIndicator');
	
		var containerlive = $('#flowlive'),
    msgHolder = containerlive.find('.rad-cntnt'),
    containerProg = containerlive.radialIndicator({
        radius: 80,
		barColor: '#F7E542',
       initValue: '{$data.livepre}',
        percentage: true,
        displayNumber: false
    }).data('radialIndicator');
	
		var containerfield = $('#flowfield'),
    msgHolder = containerfield.find('.rad-cntnt'),
    containerProg = containerfield.radialIndicator({
        radius: 80,
		barColor: '#EC5255',
       initValue: {$data.coursepre},
        percentage: true,
        displayNumber: false
    }).data('radialIndicator');
 

	
   
	 
});
		</script>
        
    </body>
</html>
